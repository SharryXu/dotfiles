#!/bin/bash

# TODO: Remember to deal with lastest slash character.

# File copy (If the original file is newer than the target file)
# Globals:
#   basename
#   print
#   cp
# Arguments:
#   Source File Path
#   Target Folder Path
# Returns:
#   None

declare -r manual="Usage: copy_file <source file path> <target folder path>"

if [ $# -eq 2 ]; then
  filename=$(basename $1)

  if [[ ! -f $1 ]]; then
    print 3 "The file: $1 is not existed."
    exit 1
  elif [[ -d $1 ]]; then
    print 3 "The source file path direct to a folder."
    exit 3
  fi

  if [[ ! -d $2 ]]; then
    print 3 "The source folder: $2 is illegal."
    exit 2
  fi

  if [[ -f $2/$filename ]]; then
    if [[ $1 -nt $2/$filename ]]; then
      cp $1 $2
      print 1 "File name $filename is replaced."
    else
      print 2 "File name $filename don't need to replace."
    fi
  else
    cp $1 $2
    print 1 "File name $filename has been created."
  fi

  exit 0
else
  print 3 $error_message_check_parameters
  exit 1
fi
